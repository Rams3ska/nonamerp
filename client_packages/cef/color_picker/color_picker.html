<head>
    <link href="color_picker.css" rel="stylesheet">
    <script src="../utils/jquery.min.js"></script>
</head>

<body>
    <div class="cont">
        <div class="picker">
            Red <input type="range" min="0" max="255" step="1" id="red" value="0">
            Green <input type="range" min="0" max="255" step="1" id="green" value="0">
            Blue <input type="range" min="0" max="255" step="1" id="blue" value="0">
            <div id="display"></div>
            <div id="buttons">
                <input type="button" id="button_yes" value="Accept" onclick="triggerYes()">
                <input type="button" id="button_cancel" value="Cancel" onclick="triggerCancel()">
            </div>
        </div>

        <script type="text/javascript">
            var colors = [0, 0, 0];

            $(function() {
                $(document).on('input change', function(element)  {
                    colors[0] = element.target.id == "red" ? Number($(element.target).val()) : colors[0];
                    colors[1] = element.target.id == "green" ? Number($(element.target).val()) : colors[1];
                    colors[2] = element.target.id == "blue" ? Number($(element.target).val()) : colors[2];

                    $('#display').css('background-color', `rgb(${colors[0]}, ${colors[1]}, ${colors[2]})`);
                });
            })

            function triggerYes() {
                mp.trigger("pickerCalled", colors[0], colors[1], colors[2]);
            }
            function triggerCancel() {
                mp.trigger("pickerClose");
            }
        </script>
    </div>
</body>

